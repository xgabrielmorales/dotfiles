#!/bin/bash

SOURCE_ICON=""
SOURCE_MUTED_ICON=""

source_volume() {
    local status
    local volume

    status=$(pamixer --default-source --get-mute)
    [[ "$status" == true ]] && echo "-1" && return 0

    volume=$(pamixer --default-source --get-volume)
    echo "$volume"
}

source_status() {
    local volume

    volume="$1"

    if (( volume <= -1 )); then
        echo "$SOURCE_MUTED_ICON MUTE"
    else
        echo "$SOURCE_ICON $volume%"
    fi
}

case "$1" in
    "--status")
        source_status "$(source_volume)"
    ;;
    "--toggle")
        pamixer --default-source --toggle-mute
    ;;
    "--inc")
        (( $(source_volume) == 100 )) && exit
        (( $(source_volume) > 100 )) && pamixer --default-source --set-volume 100
        (( $(source_volume) < 100 )) && pamixer --default-source --increase 5
    ;;
    "--dec")
        (( $(source_volume) == 0 )) && exit
        (( $(source_volume) < 0 )) && pamixer --default-source --set-volume 0
        (( $(source_volume) > 0 )) && pamixer --default-source --decrease 5
    ;;
esac
