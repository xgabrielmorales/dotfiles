#!/usr/bin/env bash

SINK_ICON=""
SINK_MUTE_ICON=""

sink_volume() {
    local status
    local volume

    status=$(pamixer --get-mute)
    [[ "$status" == true ]] && echo "-1" && return 0

    volume=$(pamixer --get-volume)
    echo "$volume"
}

sink_status() {
    local volume

    volume="$1"

    if (( volume <= -1 )); then
        echo "$SINK_MUTE_ICON MUTE"
    else
        echo "$SINK_ICON $volume%"
    fi
}

case "$1" in
    "--status")
        sink_status "$(sink_volume)"
    ;;
    "--toggle")
        pamixer --toggle-mute
    ;;
    "--inc")
        (( $(sink_volume) == 100 )) && exit
        (( $(sink_volume) > 100 )) && pamixer --set-volume 100
        (( $(sink_volume) < 100 )) && pamixer --increase 5
    ;;
    "--dec")
        (( $(sink_volume) == 0 )) && exit
        (( $(sink_volume) < 0 )) && pamixer --set-volume 0
        (( $(sink_volume) > 0 )) && pamixer --decrease 5
    ;;
esac
